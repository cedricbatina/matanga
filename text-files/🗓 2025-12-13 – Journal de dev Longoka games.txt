ğŸ—“ 2025-12-13 â€“ Journal de dev Longoka_games / Mots mÃªlÃ©s Kikongo â†’ export JSON

Ce qui a Ã©tÃ© fait aujourdâ€™hui

Backend Java / Mots mÃªlÃ©s Kikongo

Ajout de la dÃ©pendance Jackson (jackson-databind) dans le pom.xml pour pouvoir sÃ©rialiser les puzzles en JSON.

CrÃ©ation dâ€™un modÃ¨le JSON â€œofficielâ€ pour les mots mÃªlÃ©s :

WordSearchJsonModels.PackV1 (pack de grilles : schema, version, langue, packId, title, description, meaningLanguage, puzzles[]).

PuzzleV1 (id, language, mode, difficulty, title, theme, rows, cols, grid[], entries[], placements[], meta).

EntryV1 (base, display, translation, slug, partOfSpeech, extraInfo).

PlacementV1 (word, row, col, direction, length).

ImplÃ©mentation du tool CLI KikongoMixedWordSearchJsonExportTool :

Utilise KikongoMixedWordSearchService pour gÃ©nÃ©rer automatiquement des grilles 12Ã—12 (noms + verbes).

GÃ©nÃ¨re un pack JSON avec plusieurs puzzles (initialement 10, puis prÃ©vu pour 60+ grilles pour un vrai livre).

Ã‰crit le fichier kikongo-mixed-wordsearch-pack.v1.json dans le projet backend-java (chemin absolu actuel, Ã  remettre plus tard dans target/ si besoin).

Debug / Windows / encodage / chemins

Correction des soucis dâ€™encodage Windows (Cp1252 vs UTF-8) qui faisaient apparaÃ®tre mÃƒÂªlÃƒÂ©s au lieu de mÃªlÃ©s dans la console.

Nettoyage dâ€™un caractÃ¨re illÃ©gal dans KikongoMixedWordSearchTool.java (erreur unmappable character (0x8F)), puis recompilation OK.

Diagnostic du problÃ¨me â€œfichier JSON introuvableâ€ malgrÃ© le message â€œExport terminÃ©â€ :

Ajout de logs DEBUG + passage temporaire Ã  un outputPath absolu.

VÃ©rification que le fichier est bien crÃ©Ã© et accessible (exists after write ? true).

Confirmation visuelle du fichier kikongo-mixed-wordsearch-pack.v1.json (~45 Ko) et inspection de son contenu.

QualitÃ© des donnÃ©es JSON

VÃ©rification dâ€™un puzzle rÃ©el dans le JSON exportÃ© :

grid 12Ã—12 en majuscules, sans espaces.

entries avec : formes de base (base), formes affichÃ©es (display), traductions FR, slug, partOfSpeech, extraInfo (classes nominales comme n-zi, ki-bi, etc.).

placements cohÃ©rents : coordonnÃ©es (row/col), direction (RIGHT, DOWN, DIAGONAL_â€¦), longueur du mot.

Observation dâ€™un cas concret de polysÃ©mie / doublon (Yekola apparaissant deux fois avec des traductions diffÃ©rentes) â†’ dÃ©cision dâ€™ajouter des rÃ¨gles de dÃ©doublonnage dans lâ€™export.

DÃ©cisions / rÃ¨gles mÃ©tier fixÃ©es aujourdâ€™hui

Format JSON stable v1 (usable pour livres + apps)

Un pack (PackV1) regroupe plusieurs grilles :

schema = "longoka.wordsearch.pack.v1", version = 1.

language = "kg" pour le Kikongo.

meaningLanguage = "fr" pour les dÃ©finitions/dÃ©cr.

Une grille (PuzzleV1) contient :

une grille 2D sous forme de grid: string[] (une ligne = une string de cols caractÃ¨res),

une liste de mots (entries) + leurs mÃ©tadonnÃ©es (traductions FR, classes nominales, etc.),

une solution explicite (placements) exploitable pour :

gÃ©nÃ©rer des pages â€œsolutionsâ€ en livre,

surligner les mots dans une future app.

RÃ¨gles de dÃ©doublonnage dans lâ€™export

Dans une mÃªme grille :

Un base (forme canonique) ne doit apparaÃ®tre quâ€™une seule fois dans entries.

Si plusieurs sens / traductions existent pour le mÃªme base, on fusionne les traductions dans un seul champ translation (concatÃ©nation avec " ; ").

On garde le premier slug non-null, la premiÃ¨re extraInfo (classe nominale), la premiÃ¨re partOfSpeech, etc.

Au niveau des placements :

Un mot ne doit apparaÃ®tre quâ€™une seule fois dans placements â†’ si un mÃªme word (ex. YEKOLA) est placÃ© plusieurs fois, on ne garde que le premier placement.

Dans meta de chaque puzzle :

Ajout de la liste des nominalClasses prÃ©sentes dans la grille (dÃ©rivÃ©es de extraInfo des entries) pour permettre, plus tard, de filtrer ou regrouper les grilles par classes nominales (ex. grilles â€œn-ziâ€, â€œki-biâ€, etc.).

Prochaines Ã©tapes (pour demain)

Finaliser la configuration â€œlivresâ€ :

Monter puzzleCount (dÃ©jÃ  en cours) pour avoir suffisamment de grilles par pack (ex. 60+ grilles par type) afin de couvrir 3 livres :

Livre 1 : Kikongo â€“ Mots mÃªlÃ©s noms.

Livre 2 : Kikongo â€“ Mots mÃªlÃ©s verbes.

Livre 3 : Kikongo â€“ Mots mÃªlÃ©s mixte (noms + verbes).

ImplÃ©menter / factoriser les tools dâ€™export JSON :

KikongoNounWordSearchJsonExportTool (noms-only) basÃ© sur KikongoWordSearchService.

KikongoVerbWordSearchJsonExportTool (verbes-only) basÃ© sur KikongoVerbWordSearchService.

Mutualiser si besoin la logique toJsonPuzzle(...) (dÃ©doublonnage + fusion de traductions + meta.nominalClasses) pour Ã©viter le copier-coller.

Commencer Ã  rÃ©flÃ©chir au script InDesign :

Comment consommer grid, entries, placements pour gÃ©nÃ©rer automatiquement les pages grilles + pages solutions.

DÃ©finir lâ€™architecture â€œ1 pack JSON = 1 livreâ€ ou Ã©ventuellement â€œ1 pack JSON = plusieurs petits livretsâ€.